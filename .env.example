# ==============================================================================
# WINET2 Configuration Template
# ==============================================================================
# Copy this file to .env and configure for your environment
# For Home Assistant add-on installations, use /data/options.json instead

# ==============================================================================
# REQUIRED CONFIGURATION
# ==============================================================================

# WiNet Device Configuration
# Use either WINET_HOST for a single inverter OR WINET_HOSTS for multiple inverters
# Do not set both - WINET_HOSTS takes precedence if both are set
WINET_HOST=                        # Single inverter IP (e.g., 192.168.1.100)
WINET_HOSTS=                       # Multiple inverters (e.g., 192.168.1.100,192.168.1.101)

# MQTT Broker Configuration
MQTT_URL=mqtt://localhost:1883     # MQTT broker URL (use mqtts:// for SSL/TLS)

# ==============================================================================
# OPTIONAL AUTHENTICATION
# ==============================================================================

# MQTT Credentials (optional - only needed if your broker requires authentication)
MQTT_USER=                         # MQTT username
MQTT_PASS=                         # MQTT password

# WiNet Credentials (optional - defaults to admin/pw8888)
# Most installations do not require custom credentials
WINET_USER=                        # WiNet username (default: admin)
WINET_PASS=                        # WiNet password (default: pw8888)

# ==============================================================================
# POLLING & PERFORMANCE
# ==============================================================================

# Polling Interval (optional - default: 10 seconds)
# Recommended: 10-30 seconds
# Minimum: 5 seconds (lower values may cause network congestion)
# Higher values reduce network load but decrease data freshness
POLL_INTERVAL=10

# ==============================================================================
# SSL/TLS CONFIGURATION
# ==============================================================================

# SSL for Properties Fetching (optional - default: false)
# Enable if your WiNet device uses HTTPS
SSL=false

# SSL Validation Mode (optional - default: bypass)
# Options:
#   bypass - Disable certificate validation (for self-signed certs)
#   pinned - Use certificate fingerprint pinning (recommended)
#   strict - Full certificate validation (requires valid CA-signed cert)
SSL_VALIDATION=bypass

# SSL Certificate Fingerprint (required only for SSL_VALIDATION=pinned)
# Format: AA:BB:CC:DD:EE:FF:... (SHA-256 fingerprint)
# Get fingerprint with: openssl s_client -connect <host>:443 < /dev/null 2>/dev/null | openssl x509 -fingerprint -sha256 -noout
SSL_FINGERPRINT=

# ==============================================================================
# MODBUS TCP CONFIGURATION (OPTIONAL)
# ==============================================================================

# Modbus TCP IP Addresses (optional)
# For reading smart meter data (grid power, import/export energy)
# Must match the number of inverters in WINET_HOSTS
# Use empty values to skip specific inverters (e.g., "192.168.1.10,,192.168.1.12")
MODBUS_IPS=

# Inverter Type (optional)
# Used for Modbus register mapping
# Options: STRING, HYBRID
# Leave empty for auto-detection
INVERTER_TYPE=

# ==============================================================================
# HOME ASSISTANT CONFIGURATION
# ==============================================================================

# Home Assistant Discovery Prefix (optional - default: homeassistant/sensor)
# Only change if you have a custom Home Assistant configuration
HA_PREFIX=homeassistant/sensor

# Inverter Names (optional)
# Comma-separated custom names for inverters
# Must match the number of inverters in WINET_HOSTS
# If not specified, defaults to: inverter1, inverter2, etc.
# Example: WINET_NAMES=solar_east,solar_west
WINET_NAMES=

# ==============================================================================
# ANALYTICS & TELEMETRY (OPTIONAL)
# ==============================================================================

# PostHog Analytics (optional - default: false)
# Disable by default for privacy
# When enabled, sends anonymous usage data to help improve the project
ANALYTICS=false

# ==============================================================================
# METRICS & MONITORING (OPTIONAL)
# ==============================================================================

# Prometheus Metrics (optional - default: false)
# Enable Prometheus-compatible metrics endpoint for monitoring
# Useful for production deployments with Grafana/Prometheus
METRICS_ENABLED=false
ENABLE_METRICS=false  # Alternative name for the same setting

# Metrics HTTP Server Port (optional - default: 9090)
# Port for Prometheus metrics endpoint
# Metrics available at: http://localhost:9090/metrics
# Health check at: http://localhost:9090/health
METRICS_PORT=9090

# ==============================================================================
# EXAMPLE CONFIGURATIONS
# ==============================================================================

# Example 1: Single inverter with basic MQTT
# WINET_HOST=192.168.1.100
# MQTT_URL=mqtt://192.168.1.10:1883

# Example 2: Multiple inverters with custom names
# WINET_HOSTS=192.168.1.100,192.168.1.101
# WINET_NAMES=solar_east,solar_west
# MQTT_URL=mqtt://192.168.1.10:1883

# Example 3: Single inverter with Modbus and SSL
# WINET_HOST=192.168.1.100
# MQTT_URL=mqtts://192.168.1.10:8883
# MQTT_USER=homeassistant
# MQTT_PASS=your_secure_password
# MODBUS_IPS=192.168.1.100
# INVERTER_TYPE=HYBRID
# SSL=true
# SSL_VALIDATION=pinned
# SSL_FINGERPRINT=AA:BB:CC:DD:EE:FF:00:11:22:33:44:55:66:77:88:99:AA:BB:CC:DD:EE:FF:00:11:22:33:44:55:66:77:88:99

# Example 4: Multiple inverters with selective Modbus (only first and third have meters)
# WINET_HOSTS=192.168.1.100,192.168.1.101,192.168.1.102
# MODBUS_IPS=192.168.1.100,,192.168.1.102
# WINET_NAMES=house,garage,shed
# MQTT_URL=mqtt://192.168.1.10:1883
